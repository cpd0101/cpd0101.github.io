<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
  <title>领取红包的路上</title>
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>

<body>
  <script>
    var jump_url = "https://qr.alipay.com/c1x07349nmv6ni3cuyc6fd3";

    function get_query(search) {
      var match = null;
      var urlParams = {};
      var reg = /([^=&#]+)=([^&#]*)/ig;
      var query = search.slice(1);
      while (match = reg.exec(query)) {
        urlParams[decodeURIComponent(match[1])] = decodeURIComponent(match[2]);
      }
      return urlParams;
    }

    try {
      var query = get_query(location.search);
      if (query.url) {
        jump_url = atob(query.url);
      }
    } catch (e) {
      jump_url = "https://qr.alipay.com/c1x07349nmv6ni3cuyc6fd3";
    }

    function is_weixin() {
      if (/MicroMessenger/i.test(navigator.userAgent)) {
        return true;
      } else {
        return false;
      }
    }

    function is_android() {
      var a = navigator.userAgent.toLowerCase();
      if (a.match(/(Android|SymbianOS)/i)) {
        return true;
      } else {
        return false;
      }
    }

    function is_ios() {
      var a = navigator.userAgent.toLowerCase();
      if (/iphone|ipad|ipod/.test(a)) {
        return true;
      } else {
        return false;
      }
    }

    function android_auto_jump() {
      WeixinJSBridge.invoke("jumpToInstallUrl", {}, function (e) {});
      window.close();
      WeixinJSBridge.call("closeWindow");
    }

    function ios_auto_jump() {
      if (jump_url != "") {
        location.href = jump_url;
      } else {
        window.close();
        WeixinJSBridge.call("closeWindow");
      }
    }

    function onAutoinit() {
      if (is_android()) {
        android_auto_jump();
        return false;
      }
      if (is_ios()) {
        ios_auto_jump();
        return false;
      }
    }

    if (is_weixin()) {
      if (typeof WeixinJSBridge == "undefined") {
        if (document.addEventListener) {
          document.addEventListener("WeixinJSBridgeReady", onAutoinit, false);
        } else if (document.attachEvent) {
          document.attachEvent("WeixinJSBridgeReady", onAutoinit);
          document.attachEvent("onWeixinJSBridgeReady", onAutoinit);
        }
      } else {
        onAutoinit();
      }
    } else {
      if (jump_url != "") {
        location.href = jump_url;
      } else {
        window.close();
      }
    }
  </script>
  <script src="https://hm.baidu.com/hm.js?9ec911f310714b9fcfafe801ba8ae42a"></script>
</body>

</html>